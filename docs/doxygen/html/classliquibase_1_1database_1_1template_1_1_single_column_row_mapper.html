<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>LiquiBase: liquibase.database.template.SingleColumnRowMapper Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>liquibase</b>.<b>database</b>.<b>template</b>.<a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html">SingleColumnRowMapper</a>
  </div>
</div>
<div class="contents">
<h1>liquibase.database.template.SingleColumnRowMapper Class Reference</h1><!-- doxytag: class="liquibase::database::template::SingleColumnRowMapper" --><!-- doxytag: inherits="liquibase::database::template::RowMapper" --><div class="dynheader">
Inheritance diagram for liquibase.database.template.SingleColumnRowMapper:</div>
<div class="dynsection">
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="interfaceliquibase_1_1database_1_1template_1_1_row_mapper.html" title="An interface used by JdbcTemplate for mapping rows of a java.sql.ResultSet on a per-row...">RowMapper</a> implementation that converts a single column into a single result value per row. 
<p>
Expects to work on a ResultSet that just contains a single column. <p>
The type of the result value for each row can be specified. The value for the single column will be extracted from the ResultSet and converted into the specified target type.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Spring Framework </dd></dl>

<p>Definition at line <a class="el" href="_single_column_row_mapper_8java-source.html#l00020">20</a> of file <a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a>.</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#537793016951f84da11c1da3613b452d">SingleColumnRowMapper</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new <a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html" title="RowMapper implementation that converts a single column into a single result value...">SingleColumnRowMapper</a>.  <a href="#537793016951f84da11c1da3613b452d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#fed97d90bc5db1906a5c43dcefd98bb0">SingleColumnRowMapper</a> (Class requiredType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new <a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html" title="RowMapper implementation that converts a single column into a single result value...">SingleColumnRowMapper</a>.  <a href="#fed97d90bc5db1906a5c43dcefd98bb0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#43fdaf49b221e313073f92df454668b0">setRequiredType</a> (Class requiredType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the type that each result object is expected to match.  <a href="#43fdaf49b221e313073f92df454668b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#a6e5e3bb6ecd0aeb8c606d61c8dddc1b">mapRow</a> (ResultSet rs, int rowNum)  throws SQLException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extract a value for the single column in the current row.  <a href="#a6e5e3bb6ecd0aeb8c606d61c8dddc1b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#e3c3d40c27de99a3a3ade083863aa877">getColumnValue</a> (ResultSet rs, int index, Class requiredType)  throws SQLException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve a JDBC object value for the specified column.  <a href="#e3c3d40c27de99a3a3ade083863aa877"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#fb480d4a339ce0d8aaf96b2bba8dad81">getColumnValue</a> (ResultSet rs, int index)  throws SQLException </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve a JDBC object value for the specified column, using the most appropriate value type.  <a href="#fb480d4a339ce0d8aaf96b2bba8dad81"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#ff06feaa02475686a59ec2d465dd1233">convertValueToRequiredType</a> (Object value, Class requiredType)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert the given column value to the specified required type.  <a href="#ff06feaa02475686a59ec2d465dd1233"></a><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="537793016951f84da11c1da3613b452d"></a><!-- doxytag: member="liquibase::database::template::SingleColumnRowMapper::SingleColumnRowMapper" ref="537793016951f84da11c1da3613b452d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">liquibase.database.template.SingleColumnRowMapper.SingleColumnRowMapper           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new <a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html" title="RowMapper implementation that converts a single column into a single result value...">SingleColumnRowMapper</a>. 
<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#43fdaf49b221e313073f92df454668b0" title="Set the type that each result object is expected to match.">setRequiredType</a> </dd></dl>

<p>Definition at line <a class="el" href="_single_column_row_mapper_8java-source.html#l00030">30</a> of file <a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00030"></a>00030                                    {
<a name="l00031"></a>00031     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="fed97d90bc5db1906a5c43dcefd98bb0"></a><!-- doxytag: member="liquibase::database::template::SingleColumnRowMapper::SingleColumnRowMapper" ref="fed97d90bc5db1906a5c43dcefd98bb0" args="(Class requiredType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">liquibase.database.template.SingleColumnRowMapper.SingleColumnRowMapper           </td>
          <td>(</td>
          <td class="paramtype">Class&nbsp;</td>
          <td class="paramname"> <em>requiredType</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new <a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html" title="RowMapper implementation that converts a single column into a single result value...">SingleColumnRowMapper</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>requiredType</em>&nbsp;</td><td>the type that each result object is expected to match </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="_single_column_row_mapper_8java-source.html#l00038">38</a> of file <a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00038"></a>00038                                                      {
<a name="l00039"></a>00039         <span class="keyword">this</span>.requiredType = requiredType;
<a name="l00040"></a>00040     }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="43fdaf49b221e313073f92df454668b0"></a><!-- doxytag: member="liquibase::database::template::SingleColumnRowMapper::setRequiredType" ref="43fdaf49b221e313073f92df454668b0" args="(Class requiredType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void liquibase.database.template.SingleColumnRowMapper.setRequiredType           </td>
          <td>(</td>
          <td class="paramtype">Class&nbsp;</td>
          <td class="paramname"> <em>requiredType</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the type that each result object is expected to match. 
<p>
If not specified, the column value will be exposed as returned by the JDBC driver. 
<p>Definition at line <a class="el" href="_single_column_row_mapper_8java-source.html#l00047">47</a> of file <a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00047"></a>00047                                                     {
<a name="l00048"></a>00048         <span class="keyword">this</span>.requiredType = requiredType;
<a name="l00049"></a>00049     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a6e5e3bb6ecd0aeb8c606d61c8dddc1b"></a><!-- doxytag: member="liquibase::database::template::SingleColumnRowMapper::mapRow" ref="a6e5e3bb6ecd0aeb8c606d61c8dddc1b" args="(ResultSet rs, int rowNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object liquibase.database.template.SingleColumnRowMapper.mapRow           </td>
          <td>(</td>
          <td class="paramtype">ResultSet&nbsp;</td>
          <td class="paramname"> <em>rs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rowNum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%">  throws SQLException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Extract a value for the single column in the current row. 
<p>
Validates that there is only one column selected, then delegates to <code><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#e3c3d40c27de99a3a3ade083863aa877" title="Retrieve a JDBC object value for the specified column.">getColumnValue()</a></code> and also <code>convertValueToRequiredType</code>, if necessary.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd>java.sql.ResultSetMetaData.getColumnCount() <p>
<a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#e3c3d40c27de99a3a3ade083863aa877" title="Retrieve a JDBC object value for the specified column.">getColumnValue</a>(java.sql.ResultSet,int,Class) <p>
<a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#ff06feaa02475686a59ec2d465dd1233" title="Convert the given column value to the specified required type.">convertValueToRequiredType(Object,Class)</a> </dd></dl>

<p>Implements <a class="el" href="interfaceliquibase_1_1database_1_1template_1_1_row_mapper.html#cfb9ca86262cfd56d32f7370de515a66">liquibase.database.template.RowMapper</a>.</p>

<p>Definition at line <a class="el" href="_single_column_row_mapper_8java-source.html#l00062">62</a> of file <a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a>.</p>

<p>References <a class="el" href="_single_column_row_mapper_8java-source.html#l00201">liquibase.database.template.SingleColumnRowMapper.convertValueToRequiredType()</a>, and <a class="el" href="_single_column_row_mapper_8java-source.html#l00109">liquibase.database.template.SingleColumnRowMapper.getColumnValue()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00062"></a>00062                                                                        {
<a name="l00063"></a>00063         <span class="comment">// Validate column count.</span>
<a name="l00064"></a>00064         ResultSetMetaData rsmd = rs.getMetaData();
<a name="l00065"></a>00065         <span class="keywordtype">int</span> nrOfColumns = rsmd.getColumnCount();
<a name="l00066"></a>00066         <span class="keywordflow">if</span> (nrOfColumns != 1) {
<a name="l00067"></a>00067             <span class="keywordflow">throw</span> <span class="keyword">new</span> SQLException(<span class="stringliteral">"Returned too many rows"</span>);
<a name="l00068"></a>00068         }
<a name="l00069"></a>00069 
<a name="l00070"></a>00070         <span class="comment">// Extract column value from JDBC ResultSet</span>
<a name="l00071"></a>00071         Object result = <a class="code" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#e3c3d40c27de99a3a3ade083863aa877" title="Retrieve a JDBC object value for the specified column.">getColumnValue</a>(rs, 1, <span class="keyword">this</span>.requiredType);
<a name="l00072"></a>00072         <span class="keywordflow">if</span> (result != null &amp;&amp; <span class="keyword">this</span>.requiredType != null &amp;&amp; !<span class="keyword">this</span>.requiredType.isInstance(result)) {
<a name="l00073"></a>00073             <span class="comment">// Extracted value does not match already: try to convert it.</span>
<a name="l00074"></a>00074             <span class="keywordflow">try</span> {
<a name="l00075"></a>00075                 <span class="keywordflow">return</span> <a class="code" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#ff06feaa02475686a59ec2d465dd1233" title="Convert the given column value to the specified required type.">convertValueToRequiredType</a>(result, <span class="keyword">this</span>.requiredType);
<a name="l00076"></a>00076             }
<a name="l00077"></a>00077             <span class="keywordflow">catch</span> (IllegalArgumentException ex) {
<a name="l00078"></a>00078                 <span class="keywordflow">throw</span> <span class="keyword">new</span> SQLException(
<a name="l00079"></a>00079                         <span class="stringliteral">"Type mismatch affecting row number "</span> + rowNum + <span class="stringliteral">" and column type '"</span> +
<a name="l00080"></a>00080                                 rsmd.getColumnTypeName(1) + <span class="stringliteral">"': "</span> + ex.getMessage());
<a name="l00081"></a>00081             }
<a name="l00082"></a>00082         }
<a name="l00083"></a>00083         <span class="keywordflow">return</span> result;
<a name="l00084"></a>00084     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e3c3d40c27de99a3a3ade083863aa877"></a><!-- doxytag: member="liquibase::database::template::SingleColumnRowMapper::getColumnValue" ref="e3c3d40c27de99a3a3ade083863aa877" args="(ResultSet rs, int index, Class requiredType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object liquibase.database.template.SingleColumnRowMapper.getColumnValue           </td>
          <td>(</td>
          <td class="paramtype">ResultSet&nbsp;</td>
          <td class="paramname"> <em>rs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Class&nbsp;</td>
          <td class="paramname"> <em>requiredType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%">  throws SQLException <code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieve a JDBC object value for the specified column. 
<p>
The default implementation calls <code>ResultSet.getString(index)</code> etc for all standard value types (String, Boolean, number types, date types, etc). It calls <code>ResultSet.getObject(index)</code> else. <p>
If no required type has been specified, this method delegates to <code>getColumnValue(rs, index)</code>, which basically calls <code>ResultSet.getObject(index)</code> but applies some additional default conversion to appropriate value types. <p>
Explicit extraction of a String is necessary to properly extract an Oracle RAW value as a String, for example. For the other given types, it is also recommendable to extract the desired types explicitly, to let the JDBC driver perform appropriate (potentially database-specific) conversion.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rs</em>&nbsp;</td><td>is the ResultSet holding the data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>is the column index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>requiredType</em>&nbsp;</td><td>the type that each result object is expected to match (or <code>null</code> if none specified) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the Object value </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd>java.sql.ResultSet.getString(int) <p>
java.sql.ResultSet.getObject(int) <p>
<a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#e3c3d40c27de99a3a3ade083863aa877" title="Retrieve a JDBC object value for the specified column.">getColumnValue</a>(java.sql.ResultSet,int) </dd></dl>

<p>Definition at line <a class="el" href="_single_column_row_mapper_8java-source.html#l00109">109</a> of file <a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a>.</p>

<p>Referenced by <a class="el" href="_single_column_row_mapper_8java-source.html#l00062">liquibase.database.template.SingleColumnRowMapper.mapRow()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00109"></a>00109                                                                                                      {
<a name="l00110"></a>00110         <span class="keywordflow">if</span> (requiredType != null) {
<a name="l00111"></a>00111             Object value;
<a name="l00112"></a>00112             <span class="keywordtype">boolean</span> wasNullCheck = <span class="keyword">false</span>;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114             <span class="comment">// Explicitly extract typed value, as far as possible.</span>
<a name="l00115"></a>00115             <span class="keywordflow">if</span> (String.class.equals(requiredType)) {
<a name="l00116"></a>00116                 value = rs.getString(index);
<a name="l00117"></a>00117             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Boolean.class.equals(requiredType)) {
<a name="l00118"></a>00118                 value = (rs.getBoolean(index) ? Boolean.TRUE : Boolean.FALSE);
<a name="l00119"></a>00119                 wasNullCheck = <span class="keyword">true</span>;
<a name="l00120"></a>00120             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Byte.class.equals(requiredType)) {
<a name="l00121"></a>00121                 value = rs.getByte(index);
<a name="l00122"></a>00122                 wasNullCheck = <span class="keyword">true</span>;
<a name="l00123"></a>00123             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Short.class.equals(requiredType)) {
<a name="l00124"></a>00124                 value = rs.getShort(index);
<a name="l00125"></a>00125                 wasNullCheck = <span class="keyword">true</span>;
<a name="l00126"></a>00126             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Integer.class.equals(requiredType)) {
<a name="l00127"></a>00127                 value = rs.getInt(index);
<a name="l00128"></a>00128                 wasNullCheck = <span class="keyword">true</span>;
<a name="l00129"></a>00129             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Long.class.equals(requiredType)) {
<a name="l00130"></a>00130                 value = rs.getLong(index);
<a name="l00131"></a>00131                 wasNullCheck = <span class="keyword">true</span>;
<a name="l00132"></a>00132             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Float.class.equals(requiredType)) {
<a name="l00133"></a>00133                 value = rs.getFloat(index);
<a name="l00134"></a>00134                 wasNullCheck = <span class="keyword">true</span>;
<a name="l00135"></a>00135             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Double.class.equals(requiredType) || Number.class.equals(requiredType)) {
<a name="l00136"></a>00136                 value = rs.getDouble(index);
<a name="l00137"></a>00137                 wasNullCheck = <span class="keyword">true</span>;
<a name="l00138"></a>00138             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (byte[].<span class="keyword">class</span>.equals(requiredType)) {
<a name="l00139"></a>00139                 value = rs.getBytes(index);
<a name="l00140"></a>00140             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (java.sql.Date.class.equals(requiredType)) {
<a name="l00141"></a>00141                 value = rs.getDate(index);
<a name="l00142"></a>00142             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (java.sql.Time.class.equals(requiredType)) {
<a name="l00143"></a>00143                 value = rs.getTime(index);
<a name="l00144"></a>00144             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (java.sql.Timestamp.class.equals(requiredType) || java.util.Date.class.equals(requiredType)) {
<a name="l00145"></a>00145                 value = rs.getTimestamp(index);
<a name="l00146"></a>00146             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BigDecimal.class.equals(requiredType)) {
<a name="l00147"></a>00147                 value = rs.getBigDecimal(index);
<a name="l00148"></a>00148             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Blob.class.equals(requiredType)) {
<a name="l00149"></a>00149                 value = rs.getBlob(index);
<a name="l00150"></a>00150             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Clob.class.equals(requiredType)) {
<a name="l00151"></a>00151                 value = rs.getClob(index);
<a name="l00152"></a>00152             } <span class="keywordflow">else</span> {
<a name="l00153"></a>00153                 <span class="comment">// Some unknown type desired -&gt; rely on getObject.</span>
<a name="l00154"></a>00154                 value = rs.getObject(index);
<a name="l00155"></a>00155             }
<a name="l00156"></a>00156 
<a name="l00157"></a>00157             <span class="comment">// Perform was-null check if demanded (for results that the</span>
<a name="l00158"></a>00158             <span class="comment">// JDBC driver returns as primitives).</span>
<a name="l00159"></a>00159             <span class="keywordflow">if</span> (wasNullCheck &amp;&amp; value != null &amp;&amp; rs.wasNull()) {
<a name="l00160"></a>00160                 value = null;
<a name="l00161"></a>00161             }
<a name="l00162"></a>00162             <span class="keywordflow">return</span> value;
<a name="l00163"></a>00163         } <span class="keywordflow">else</span> {
<a name="l00164"></a>00164             <span class="comment">// No required type specified -&gt; perform default extraction.</span>
<a name="l00165"></a>00165             <span class="keywordflow">return</span> <a class="code" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#e3c3d40c27de99a3a3ade083863aa877" title="Retrieve a JDBC object value for the specified column.">getColumnValue</a>(rs, index);
<a name="l00166"></a>00166         }
<a name="l00167"></a>00167     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="fb480d4a339ce0d8aaf96b2bba8dad81"></a><!-- doxytag: member="liquibase::database::template::SingleColumnRowMapper::getColumnValue" ref="fb480d4a339ce0d8aaf96b2bba8dad81" args="(ResultSet rs, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object liquibase.database.template.SingleColumnRowMapper.getColumnValue           </td>
          <td>(</td>
          <td class="paramtype">ResultSet&nbsp;</td>
          <td class="paramname"> <em>rs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%">  throws SQLException <code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieve a JDBC object value for the specified column, using the most appropriate value type. 
<p>
Called if no required type has been specified. <p>
The default implementation delegates to <code>JdbcUtils.getResultSetValue()</code>, which uses the <code>ResultSet.getObject(index)</code> method. Additionally, it includes a "hack" to get around Oracle returning a non-standard object for their TIMESTAMP datatype. See the <code>JdbcUtils.getResultSetValue()</code> javadoc for details.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rs</em>&nbsp;</td><td>is the ResultSet holding the data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>is the column index </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the Object value </dd></dl>

<p>Definition at line <a class="el" href="_single_column_row_mapper_8java-source.html#l00182">182</a> of file <a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00182"></a>00182                                                                                  {
<a name="l00183"></a>00183         <span class="keywordflow">return</span> JdbcUtils.getResultSetValue(rs, index);
<a name="l00184"></a>00184     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ff06feaa02475686a59ec2d465dd1233"></a><!-- doxytag: member="liquibase::database::template::SingleColumnRowMapper::convertValueToRequiredType" ref="ff06feaa02475686a59ec2d465dd1233" args="(Object value, Class requiredType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Object liquibase.database.template.SingleColumnRowMapper.convertValueToRequiredType           </td>
          <td>(</td>
          <td class="paramtype">Object&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Class&nbsp;</td>
          <td class="paramname"> <em>requiredType</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert the given column value to the specified required type. 
<p>
Only called if the extracted column value does not match already. <p>
If the required type is String, the value will simply get stringified via <code>toString()</code>. In case of a Number, the value will be converted into a Number, either through number conversion or through String parsing (depending on the value type).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>the column value as extracted from <code><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#e3c3d40c27de99a3a3ade083863aa877" title="Retrieve a JDBC object value for the specified column.">getColumnValue()</a></code> (never <code>null</code>) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>requiredType</em>&nbsp;</td><td>the type that each result object is expected to match (never <code>null</code>) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the converted value </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classliquibase_1_1database_1_1template_1_1_single_column_row_mapper.html#e3c3d40c27de99a3a3ade083863aa877" title="Retrieve a JDBC object value for the specified column.">getColumnValue</a>(java.sql.ResultSet,int,Class) </dd></dl>

<p>Definition at line <a class="el" href="_single_column_row_mapper_8java-source.html#l00201">201</a> of file <a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a>.</p>

<p>Referenced by <a class="el" href="_single_column_row_mapper_8java-source.html#l00062">liquibase.database.template.SingleColumnRowMapper.mapRow()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00201"></a>00201                                                                                   {
<a name="l00202"></a>00202         <span class="keywordflow">if</span> (String.class.equals(<span class="keyword">this</span>.requiredType)) {
<a name="l00203"></a>00203             <span class="keywordflow">return</span> value.toString();
<a name="l00204"></a>00204         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Number.class.isAssignableFrom(<span class="keyword">this</span>.requiredType)) {
<a name="l00205"></a>00205             <span class="keywordflow">if</span> (value instanceof Number) {
<a name="l00206"></a>00206                 <span class="comment">// Convert original Number to target Number class.</span>
<a name="l00207"></a>00207                 <span class="keywordflow">return</span> NumberUtils.convertNumberToTargetClass(((Number) value), <span class="keyword">this</span>.requiredType);
<a name="l00208"></a>00208             } <span class="keywordflow">else</span> {
<a name="l00209"></a>00209                 <span class="comment">// Convert stringified value to target Number class.</span>
<a name="l00210"></a>00210                 <span class="keywordflow">return</span> NumberUtils.parseNumber(value.toString(), <span class="keyword">this</span>.requiredType);
<a name="l00211"></a>00211             }
<a name="l00212"></a>00212         } <span class="keywordflow">else</span> {
<a name="l00213"></a>00213             <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(
<a name="l00214"></a>00214                     <span class="stringliteral">"Value ["</span> + value + <span class="stringliteral">"] is of type ["</span> + value.getClass().getName() +
<a name="l00215"></a>00215                             <span class="stringliteral">"] and cannot be converted to required type ["</span> + <span class="keyword">this</span>.requiredType.getName() + <span class="stringliteral">"]"</span>);
<a name="l00216"></a>00216         }
<a name="l00217"></a>00217     }
</pre></div>
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>java/liquibase/database/template/<a class="el" href="_single_column_row_mapper_8java-source.html">SingleColumnRowMapper.java</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"/></a></address>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1719178-1";
urchinTracker();
</script>
</body>
</html
